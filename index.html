<!DOCTYPE html>
<html lang="en">

<style>
body {
    background-color: #202020;
    font-family: 'Space Grotesk', sans-serif;
    color: white;
    padding: 20px;
    margin: 0;
    display: flex;
    justify-content: center;
}

#app {
    width: 1000px;
    max-width: 100%;
    padding: 20px;
    box-sizing: border-box;
}

.fixed-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background-color: #333;
    color: white;
    padding: 10px;
    display: flex;
    justify-content: space-between;
}

.form-section {
    background-color: #333;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
}

textarea {
    width: 100%;
    height: 150px;
    margin-top: 10px;
    padding: 10px;
    resize: none;
    border: none;
    border-radius: 10px;
    background-color: #444;
    color: white;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 16px;
}

button, input[type="submit"] {
    width: 100%;
    padding: 10px;
    font-size: 1.2rem;
    background: #444;
    border: none;
    color: white;
    cursor: pointer;
    border-radius: 5px;
    font-family: 'Space Grotesk', sans-serif;
    margin-top: 10px;
}

h2 {
    font-size: 1.5em;
    margin-bottom: 10px;
}
</style>
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <title>Dialogue Submission</title>
</head>

<body>
    <div id="app">
        <!-- Navigation -->
        <nav class="fixed-menu">
            <button id="timer">00:00</button>
            <div id="turn-nav"></div>
        </nav>

        <!-- Form -->
        <form id="form" action="https://script.google.com/macros/s/AKfycbyALcX9piRnqVF-TAPxjS_kstscBom6AYBMjhYDJo9repQ-tQwEY_C2P1X9Ov0PmSsY/exec" method="post">

            <!-- User Personality -->
            <div class="form-section">
                <h2>User Personality</h2>
                <textarea id="userPersonality" name="userPersonality"></textarea>
            </div>

            <!-- Objective -->
            <div class="form-section">
                <h2>Objective</h2>
                <textarea id="objective" name="objective"></textarea>
            </div>

            <!-- Backstory -->
            <div class="form-section">
                <h2>Backstory</h2>
                <textarea id="backstory" name="backstory"></textarea>
            </div>

            <!-- Turns will be added here -->
            <div id="turns"></div>

            <!-- Add Turn Button -->
            <button id="addTurn" type="button">+1 Turn</button>

            <!-- Submit Button -->
            <input type="submit" value="Submit">
        </form>
    </div>

    <script>
// Function to copy text from textarea
function copyToClipboard(id) {
    /* Get the text field */
    var copyText = document.getElementById(id);

    /* Select the text field */
    copyText.select();
    copyText.setSelectionRange(0, 99999); /* For mobile devices */

    /* Copy the text inside the text field */
    document.execCommand("copy");

    /* Alert the copied text */
    alert("Copied the text: " + copyText.value);
}

document.addEventListener('DOMContentLoaded', (event) => {
    // Add event listener for "Add Turn" button
    document.getElementById("addTurn").addEventListener("click", function() {
        var turns = document.getElementById("turns");

        // Get current number of turns
        var currentTurnNumber = turns.getElementsByClassName("turn").length + 1;

        // Create new turn
        var newTurn = document.createElement("div");
        newTurn.className = "turn";
        newTurn.innerHTML =
            `<div class="form-section">
                <h2>Turn ${currentTurnNumber}</h2>
                <h3>User</h3>
                <textarea id="userTurn${currentTurnNumber}"></textarea>
                <button onclick="copyToClipboard('userTurn${currentTurnNumber}')">Copy</button>
                <h3>Bot</h3>
                <textarea id="botTurn${currentTurnNumber}"></textarea>
                <button onclick="copyToClipboard('botTurn${currentTurnNumber}')">Copy</button>
                <label><input type="checkbox" id="branding${currentTurnNumber}">Branding</label>
                <h3>Source Link</h3>
                <textarea id="sourceLink${currentTurnNumber}"></textarea>
                <button onclick="copyToClipboard('sourceLink${currentTurnNumber}')">Copy</button>
                <h3>Source Research</h3>
                <textarea id="sourceResearch${currentTurnNumber}"></textarea>
                <button onclick="copyToClipboard('sourceResearch${currentTurnNumber}')">Copy</button>
            </div>`;
        turns.appendChild(newTurn);
    });
});
</script>

</body>

</html>
